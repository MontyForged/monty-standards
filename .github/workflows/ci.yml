name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

# This repo contains templates, not a specific language project.
# CI validates file structure and template completeness.

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Validate structure
        run: |
          echo "Checking required files..."
          
          # Check root files
          required_files=(
            "README.md"
            "LICENSE"
            "AGENTS.md"
            "CONTRIBUTING.md"
          )
          
          for file in "${required_files[@]}"; do
            if [ ! -f "$file" ]; then
              echo "Missing: $file"
              exit 1
            fi
          done
          
          echo "All required root files present."
          
      - name: Check template directories
        run: |
          template_types=("node" "python" "rust" "go")
          
          for type in "${template_types[@]}"; do
            if [ -d "templates/$type" ]; then
              echo "Template $type: present"
            fi
          done
          
      - name: Check GitHub workflows
        run: |
          if [ -d ".github/workflows" ]; then
            echo "GitHub workflows: present"
            ls -la .github/workflows/
          else
            echo "Missing: .github/workflows"
            exit 1
          fi
